poll教程第二节
===
### 配置
mysite/settings
DATABASE{}   engine 用哪种数据库  name 数据库存储文件名
其他需要关注的配置：
INSTALLED_APPS django数据库迁移时会检查installed apps中的应用涉及到类,根据类生成sql。如果模块应用未添加到此配置，那么模块下models.py





3. python manage.py sqlmigrate polls
 0001  查看sql语句


执行迁移脚本
### shell
python manage.py shell  与一般的python交互式解释器不同，还包含django上下文环境，拥有django相关功能。


Question.objects.all()
Question.objects.filter(id=1)
Question.objects.filter(pk=1)
Question.objects.filter(question_text__startswith='下周')


### orm 操作
1. 查询表中所有数据
Question.objects.all() 返回models对应table
的所有行
2. 插入数据  默认自动提交。
q = Question()
q.save()
3. 带条件查询
4. 模糊匹配   字段后跟表示特殊操作__开头
类.objects.filter()

5. 
8. 一对多关系
先把一的一方的表的一行数据get出来，
q = Question.objects.get(id=1)
然后反向查询关联创建 q.choice_set.create(choice_text="考", votes=0)
9. 删除
q = Question.objects.get(id=)
q.delete()

更多查询语法参考

### 迁移migrate数据库
1. settings.py INSTALLED_APP 插上应用
2. python manage.py makemigrations polls   根据模块models.py生成迁移脚本
3. python manage.py sqlmigration polls 0001  查看sql语句。
4. python manage.py migrate  执行迁移脚本

注意：orm框架并非万能，较复杂的数据结构可能报错，可以手动在数据库简历表，不走migrate，只要保证models.py中的定义字段属性与数据库表一致。


## Admin管理员

mysite>python manage.py createsuperuser

(django )https://docs.djangoproject.com/zh-hans/2.1/intro/tutorial02/

python manage.py sqlmigrate polls
 0001
python manage.py migrate

from polls.models import Choice, Question

Question.objects.all()

from django.utils import timezone